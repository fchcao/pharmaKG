# 制药行业知识图谱本体Schema研究计划

## 一、研究目标

构建制药行业普适的知识图谱本体schema，通过interview方式完善领域知识覆盖面，输出清晰简洁的方案/计划/交流纪要。

## 二、文献资料分析总结

### 2.1 已调研资料概览

| 资料名称 | 解决的业务问题 | Schema设计特点 | 业务覆盖范围 |
|---------|--------------|--------------|------------|
| **ZeClinics - 药物发现** | 靶点识别与生物医学数据集成 | 节点：靶点(基因/蛋白)、候选药物、疾病/表型；边：语义标签+方向性 | 药物发现、靶点识别 |
| **FAIR Cookbook - 公共资源** | 多源数据集成与互操作性 | 整合OpenTarget、Pharos、Hetionet等11类资源 | 全生命周期 |
| **IntuitionLabs - 架构** | 数据集成架构模式 | ETL/ELT、虚拟化、流式复制模式；R2RML/RML映射 | R&D数据集成 |
| **供应链文章** | 药品短缺分析与决策支持 | MedSupplyKG:10,351节点，24,820边；包含授权持有人、短缺原因等 | 供应链管理 |
| **Meegle综合指南** | 行业应用与实施框架 | 实体+关系+本体+数据源+图数据库+可视化 | 全行业覆盖 |
| **IQVIA数据可视化** | 利益相关者分析与政策解读 | NLP+KG组合，可视化网络关系 | 监管与政策 |

### 2.2 核心实体类型汇总（跨研究）

**生物医学核心实体**：
- Chemical/Drug (化学物质/药物)
- Gene/Protein/Target (基因/蛋白/靶点)
- Disease (疾病)
- Phenotype/Symptom (表型/症状)
- Pathway (通路)
- Biological Process (生物过程)

**临床试验实体**：
- Clinical Trial (临床试验)
- Patient/Subject (患者/受试者)
- Assay/Bioassay (实验/生物检测)
- Outcome (结局)

**供应链实体**：
- Manufacturer (制造商)
- Supplier (供应商)
- Authorization Holder (授权持有人)
- API (Active Pharmaceutical Ingredient)
- Drug Shortage (药品短缺)

**监管与市场实体**：
- Regulatory Agency (监管机构)
- Policy/Guideline (政策/指南)
- KOL/Stakeholder (关键意见领袖/利益相关者)

### 2.3 标准本体与词汇体系

| 本体名称 | 覆盖领域 | 用途 |
|---------|---------|------|
| **Biolink Model** | 临床、生物医学、转化科学 | 通用schema |
| **BAO** | BioAssay Ontology | 实验标准化 |
| **GO** | Gene Ontology | 基因功能 |
| **DO/MONDO** | Disease Ontology | 疾病分类 |
| **HPO** | Human Phenotype Ontology | 人类表型 |
| **EFO** | Experimental Factor Ontology | 实验因素 |
| **ChEBI** | Chemical Entities of Biological Interest | 化学实体 |
| **ATC** | Anatomical Therapeutic Chemical | 药物分类 |
| **SNOMED-CT** | 临床术语 | 临床概念 |

### 2.4 关系类型模式

**药物-疾病关系**：treats, prevents, causes, contraindicates
**药物-靶点关系**：binds, inhibits, activates, regulates
**靶点-通路关系**：participates_in, regulates
**疾病-表型关系**：has_phenotype, presents_with
**供应链关系**：manufactures, supplies, distributes, reports_shortage

## 三、制药行业业务领域分析

### 3.1 核心业务领域

基于文献分析，制药行业可分为以下核心领域：

```
┌─────────────────────────────────────────────────────────┐
│                   制药行业业务全景                        │
├─────────────────────────────────────────────────────────┤
│  1. 研究与发现 (R&D)                                    │
│     - 靶点识别                                          │
│     - 药物设计                                          │
│     - 先导化合物优化                                    │
│     - 表型筛选                                          │
├─────────────────────────────────────────────────────────┤
│  2. 临床开发                                            │
│     - I/II/III期试验                                    │
│     - 受试者招募                                        │
│     - 安全性与有效性评估                                │
│     - 监管申报                                          │
├─────────────────────────────────────────────────────────┤
│  3. 生产制造                                            │
│     - API生产                                           │
│     - 制剂生产                                          │
│     - 质量控制                                          │
│     - 供应链管理                                        │
├─────────────────────────────────────────────────────────┤
│  4. 监管合规                                            │
│     - 药品注册                                          │
│     - 药物警戒                                          │
│     - 不良事件报告                                      │
│     - 合规性检查                                        │
├─────────────────────────────────────────────────────────┤
│  5. 商业化                                              │
│     - 市场准入                                          │
│     - 定价与报销                                        │
│     - 医保准入                                          │
│     - 真实世界证据                                      │
├─────────────────────────────────────────────────────────┤
│  6. 上市后监测                                          │
│     - 安全性监测                                        │
│     - 药物警戒                                          │
│     - 疗效评估                                          │
│     - 供应保障                                          │
└─────────────────────────────────────────────────────────┘
```

### 3.2 跨领域实体交互矩阵

| 实体类型 | R&D | 临床 | 生产 | 监管 | 商业 | 上市后 |
|---------|-----|------|-----|------|-----|-------|
| Drug | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| Target | ✓ | ○ | - | - | - | - |
| Disease | ✓ | ✓ | - | ✓ | ✓ | ✓ |
| ClinicalTrial | - | ✓ | - | ✓ | - | - |
| Patient | - | ✓ | - | ○ | ○ | ✓ |
| Manufacturer | - | ○ | ✓ | ✓ | ✓ | ✓ |
| RegulatoryAgency | - | ✓ | ✓ | ✓ | ✓ | ✓ |
| AdverseEvent | ○ | ✓ | - | ✓ | - | ✓ |
| SupplyShortage | - | - | ✓ | - | ✓ | ✓ |

## 四、现有Schema设计评估

### 4.1 优点总结

1. **模块化设计**：大多数KG采用层次化的本体设计
2. **标准化程度高**：广泛采用OBO Foundry等标准本体
3. **可扩展性强**：支持动态添加新的实体和关系类型
4. **互操作性**：使用URI/IRI进行持久化标识

### 4.2 局限性与挑战

1. **领域割裂**：各阶段KG相对独立，缺乏全流程连接
2. **实体粒度不一致**：同名实体在不同阶段定义不同
3. **关系语义模糊**：缺乏统一的谓词体系
4. **时序支持不足**：大多数KG是静态的，缺乏时间维度
5. **供应链覆盖薄弱**：现有KG主要聚焦R&D，供应链KG较少

## 五、通用设计模式提炼

### 5.1 架构模式

```
┌─────────────────────────────────────────────────────┐
│              制药KG通用架构模式                      │
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐   │
│  │ 数据源   │────▶│ ETL/ELT  │────▶│ 图数据库  │   │
│  │ 层       │     │ 层       │     │ 层       │   │
│  └──────────┘     └──────────┘     └──────────┘   │
│       │                  │                  │       │
│       ▼                  ▼                  ▼       │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐   │
│  │ 本体层   │◀───▶│ 标识映射  │◀───▶│ 查询API  │   │
│  │          │     │ 层       │     │ 层       │   │
│  └──────────┘     └──────────┘     └──────────┘   │
│                                              │       │
│                                              ▼       │
│                                      ┌──────────┐   │
│                                      │ 可视化   │   │
│                                      │ 与分析   │   │
│                                      └──────────┘   │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### 5.2 实体设计原则

1. **URI持久化**：使用持久化标识符（DOI、IRI）
2. **多源对齐**：通过交叉引用实现同一实体多源汇聚
3. **层次分类**：采用is_a关系建立实体层次结构
4. **属性丰富**：支持多值属性和时态属性

### 5.3 关系设计原则

1. **语义明确**：使用标准化的谓词
2. **方向性**：明确关系的方向和传递性
3. **证据溯源**：每个关系附带来源和置信度
4. **时间标注**：关键关系标注时间戳

## 六、后续工作计划

### 6.1 Interview提纲设计

为完善领域知识覆盖面，设计以下interview提纲：

**阶段一：业务领域梳理**
1. 各业务领域的核心实体有哪些？
2. 这些实体之间如何交互？
3. 有哪些关键的业务流程？
4. 常见的业务问题是什么？

**阶段二：实体关系细化**
1. 实体的属性有哪些（必填/选填）？
2. 关系的类型和约束是什么？
3. 是否有时序或状态变化？
4. 数据来源和质量如何保证？

**阶段三：场景验证**
1. 典型查询场景有哪些？
2. 决策支持需要什么信息？
3. 如何衡量KG的价值？

### 6.2 待扩展领域

基于文献缺口，以下领域需要重点关注：

1. **真实世界证据(RWE)**：患者数据、电子健康记录
2. **药物经济学**：成本效益、健康经济学
3. **医保与准入**：定价、报销、市场准入
4. **数字健康**：数字疗法、伴随诊断
5. **上市后监测**：不良反应、药物警戒

### 6.3 输出计划

最终将输出以下文档：

1. **制药行业知识图谱本体规范**（Schema Specification）
2. **实体与关系详细定义**（Entity & Relationship Definitions）
3. **实施指南**（Implementation Guide）
4. **交流纪要**（Interview Summary）

## 七、用户需求确认

基于交互访谈，确认用户需求：

| 需求维度 | 用户选择 | 说明 |
|---------|---------|------|
| 业务领域 | 全流程覆盖 | R&D + 供应链 + 监管合规 |
| 复杂度问题 | 全维度问题 | 实体分类层级、实体间关系、业务边界、数据源集成 |
| 输出形式 | 多形式输出 | Schema文档 + 交流纪要 + 实施路线图 + 可视化图谱 |

## 八、核心痛点分析

用户面临的核心挑战：

1. **实体分类层级问题**
   - 制药行业实体众多（药物、靶点、疾病、试验、供应商...）
   - 层级结构不清晰，不知如何划分大类-子类-实例

2. **实体间关系复杂**
   - 关系类型交叉（如药物-疾病有治疗、预防、禁忌等多种关系）
   - 关系可能传递或非传递，需要明确定义

3. **业务边界模糊**
   - 不同业务阶段对同一实体定义不同
   - 例如："患者"在临床阶段和上市后阶段的数据属性差异

4. **数据源集成困难**
   - 多个数据源（ChEMBL、DrugBank、 clinicaltrials.gov等）
   - 相同实体使用不同标识符，需要对齐

## 九、解决方案框架

### 9.1 分阶段实施策略

```
Phase 1: 核心本体设计（2-3周）
├── 定义核心实体类（20-30个顶层类）
├── 建立层次结构（is_a关系）
└── 设计核心关系类型

Phase 2: 关系语义细化（2-3周）
├── 定义谓词体系
├── 明确关系约束（基数性、传递性）
└── 建立关系推理规则

Phase 3: 数据源映射（3-4周）
├── 识别关键数据源
├── 建立标识符映射表
└── 设计ETL流程

Phase 4: 验证与迭代（持续）
├── 场景验证
├── 查询测试
└── 持续优化
```

### 9.2 实体分类框架建议

**第一层：6大核心领域**

```
pharmaceutical:Entity (抽象根类)
├── rdm:ResearchEntity (研究实体)
│   ├── Chemical
│   ├── Target (Gene/Protein)
│   ├── Pathway
│   └── Assay
├── clinical:ClinicalEntity (临床实体)
│   ├── ClinicalTrial
│   ├── Patient
│   ├── Intervention
│   └── Outcome
├── manufacturing:ManufacturingEntity (生产实体)
│   ├── Manufacturer
│   ├── Supplier
│   ├── API
│   └── Facility
├── regulatory:RegulatoryEntity (监管实体)
│   ├── RegulatoryAgency
│   ├── Submission
│   ├── Approval
│   └── AdverseEvent
├── commercial:CommercialEntity (商业实体)
│   ├── Market
│   ├── Pricing
│   ├── Reimbursement
│   └── Sales
└── supplychain:SupplyChainEntity (供应链实体)
    ├── Distribution
    ├── Inventory
    ├── Shortage
    └── Logistics
```

### 9.3 关系设计原则

**命名规范**：
- 使用`动词_名词`形式：`treats_disease`, `inhibits_target`
- 避免歧义：`has_effect` → `increases_expression` / `decreases_expression`

**关系属性**：
- 每个关系包含：`source`, `confidence`, `evidence_type`, `timestamp`

**传递性定义**：
- 显式标注：`transitive: true/false`
- 示例：`part_of` (传递), `interacts_with` (非传递)

### 9.4 数据源集成策略

**标识符映射服务**：
```
Unified ID System
├── Chemical: InChIKey (主), PubChem CID, ChEMBL ID
├── Gene: HGNC Symbol (主), Ensembl ID, Entrez ID
├── Disease: MONDO ID (主), DOID, ICD-10, SNOMED-CT
├── Drug: RxNorm CUI (主), DrugBank ID, ATC Code
└── Trial: NCT Number (主), EudraCT, JCTC
```

## 十、交付物清单

### 10.1 本体Schema文档
- [ ] 实体类定义（含层次结构）
- [ ] 关系类型定义（含约束）
- [ ] 属性定义（含数据类型）
- [ ] 示例三元组

### 10.2 交流纪要
- [ ] 文献调研核心发现
- [ ] 设计决策记录
- [ ] 待解决问题清单

### 10.3 实施路线图
- [ ] 分阶段计划
- [ ] 里程碑定义
- [ ] 资源需求评估
- [ ] 风险与应对

### 10.4 可视化图谱
- [ ] 实体关系图（层级视图）
- [ ] 核心路径示例图
- [ ] 数据流图

## 十一、下一步行动

1. **启动Interview流程**
   - 按业务领域分阶段进行
   - 每个领域2-3次深度访谈
   - 记录并整理访谈纪要

2. **构建原型Schema**
   - 选择1-2个核心领域先行设计
   - 验证设计可行性
   - 迭代优化

3. **补充文献调研**
   - 针对供应链和监管合规领域
   - 收集行业标准和最佳实践

## 十二、关键参考文献

1. Biolink Model - 通用生物医学schema
2. BAO (BioAssay Ontology) - 实验标准化
3. Open PHACTS - 药理学数据集成案例
4. Hetionet - 药物重定位KG
5. MedSupplyKG - 供应链KG案例

---

*本计划基于8篇核心文献及补充资料分析整理而成，已根据用户需求确认进行优化*

## 十三、项目文件组织结构

为便于管理和协作，项目将采用以下目录结构：

```
pj-pharmaKG/
├── docs/
│   ├── research-plan/           # 研究计划文档
│   │   ├── 01-研究总计划.md      # 本文件
│   │   ├── 02-文献调研总结.md    # 文献分析详细报告
│   │   └── 03-实施方案.md        # 具体实施步骤
│   │
│   ├── interview-notes/          # 访谈纪要
│   │   ├── rd-domain/           # R&D领域访谈
│   │   ├── clinical-domain/     # 临床领域访谈
│   │   ├── supply-chain/        # 供应链领域访谈
│   │   └── regulatory/          # 监管合规领域访谈
│   │
│   └── schema/                   # Schema设计文档
│       ├── entities/            # 实体定义
│       ├── relationships/       # 关系定义
│       ├── attributes/          # 属性定义
│       └── examples/            # 示例数据
│
├── ontologies/                   # 本体文件
│   ├── pharma-kg.ttl           # 主本体（Turtle格式）
│   ├── pharma-kg.owl           # OWL格式
│   └── mappings/               # 标识符映射
│
├── data/                         # 数据目录
│   ├── sources/                # 原始数据
│   ├── processed/              # 处理后数据
│   └── validated/              # 验证后数据
│
├── scripts/                      # ETL脚本
│   ├── extract/                # 数据提取
│   ├── transform/              # 数据转换
│   └── load/                   # 数据加载
│
├── visualizations/               # 可视化图表
│   ├── entity-relation-diagrams/
│   ├── data-flow-diagrams/
│   └── architecture-diagrams/
│
└── README.md                     # 项目说明
```

## 十四、计划执行检查清单

**文献调研阶段** ✅
- [x] 收集8篇核心文献
- [x] 提取schema设计要点
- [x] 分析实体类型汇总
- [x] 整理标准本体列表
- [x] 识别设计模式与原则

**需求分析阶段** ✅
- [x] 明确业务领域范围
- [x] 识别核心痛点问题
- [x] 确定输出形式需求
- [x] 设计实施方案框架

**下一步待办** ⏳
- [ ] 创建项目目录结构
- [ ] 保存研究计划到项目
- [ ] 开始Interview流程
- [ ] 设计核心Schema原型
